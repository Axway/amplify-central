---
title: Reference - Agent configuration
linkTitle: Reference - Agent configuration
draft: false
weight: 30
---
Use variables to control your Discovery and Traceability agents.

As the Discovery and Traceability agents share many parameters, it is more efficient to use environment variables and reference these parameters instead of declaring parameters twice.

To maintain a shareable collection of environment files, you can create a `da_env_vars.env` (Discovery Agent) and `ta_env_vars.env` (Traceability Agent) file per environment, which contain simple key value pairs. By default, agent configuration files are looking for corresponding environment variables before looking on the configuration file property. This file can be used for both modes of the agent (binary vs Docker container).
  
{{< alert title="Note" color="primary" >}}The agent (binary mode) will accept an argument pointing to the environment variables file, which you can point to the `da_env_vars.env` or `ta_env_vars.env` file. Use the --envFile `da_env_vars.env` argument with either agent, pointing to the file for that agent. <br />The Docker image of the agent is expecting this `da_env_vars.env` or `ta_env_vars.env` as an argument of the Docker runner `docker run --env-file <PATH>/da_env_vars.env...`{{< /alert >}}

Some variables/properties have default known values, so it is not necessary to parameter them.

If you want to benefit from the advanced agents features (SSL security / proxy access / logging), the following section describes the variables the agents (Discovery / Traceability) rely on.

## Complete variable list for advance features

You can extend the previous minimum variable list with the following variables. Some are common to all agents, and some are specific to an agent.

### Common variables to both agents

| Variable name                             | Description                                                                                                                                                                                                                                                                                                                          |
|-------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Kafka configuration variables**         |                                                                                                                                                                                                                                                                                                                                      |
| KAFKA_CLOUD_ENABLED                       | When set to TRUE, the agent is configured to use Confluent Cloud.                                                                                                                                                                                                                                                                        |
| KAFKA_CLOUD_ENVIRONMENT                   | The identifier of the Confluent Cloud environment.                                                                                                                                                                                                                                                                                  |
| KAFKA_CLOUD_AUTH_APIKEY_ID                | The cloud API key associated to the Confluent Cloud environment.                                                                                                                                                                                                                                                                     |
| KAFKA_CLOUD_AUTH_APIKEY_SECRET            | The secret for the cloud API key.                                                                                                                                                                                                                                                                                                        |
| KAFKA_CLUSTER_ID                          | The identifier for the Kafka cluster within the Confluent Cloud environment.                                                                                                                                                                                                                                                             |
| KAFKA_CLUSTER_AUTH_APIKEY_ID              | The API key associated to the Confluent Cloud cluster.                                                                                                                                                                                                                                                                               |
| KAFKA_CLUSTER_AUTH_APIKEY_SECRET          | The secret for the cluster API key.                                                                                                                                                                                                                                                                                                      |
| KAFKA_CLUSTER_SERVERS                     | The bootstrap server that the agent uses to communicate with the Kafka cluster when configured to use the Confluent Platform.                                                                                                                                                                                                                    |
| KAFKA_CLUSTER_AUTH_SASL_MECHANISM         | The SASL authentication mechanism (PLAIN, SCRAM-SHA-256 or SCRAM-SHA-512) that the agent will use to communicate with the Kafka cluster within the Confluent Platform.                                                                                                                                                                         |
| KAFKA_CLUSTER_AUTH_SASL_USERNAME          | The SASL username used for authenticating with the Kafka cluster.                                                                                                                                                                                                                                                                       |
| KAFKA_CLUSTER_AUTH_SASL_PASSWORD          | The password for the SASL user for authenticating with the Kafka cluster.                                                                                                                                                                                                                                                                    |
| KAFKA_SCHEMAREGISTRY_ENABLED              | When set to TRUE, the Discovery Agent is configured to use the Schema registry to discover schema associated to the topic for preparing the AsyncAPI specification.                                                                                                                                                                      |
| KAFKA_SCHEMAREGISTRY_URL                  | The base URL that the Discovery Agent uses to communicate with the Schema registry when configured to use the Confluent Platform.                                                                                                                                                                                                            |
| KAFKA_SCHEMAREGISTRY_AUTH_APIKEY_ID       | The API key associated to the Schema registry in the Confluent Cloud/Confluent Platform.                                                                                                                                                                                                                                                 |
| KAFKA_SCHEMAREGISTRY_AUTH_APIKEY_SECRET   | The secret for the Schema registry API key in Confluent Cloud.                                                                                                                                                                                                                                                                           |
| KAFKA_SCHEMAREGISTRY_AUTH_SASL_MECHANISM  | The SASL authentication mechanism (PLAIN, SCRAM-SHA-256 or SCRAM-SHA-512) that the agent will use to communicate with the Schema registry within the Confluent Platform.                                                                                                                                                                       |
| KAFKA_SCHEMAREGISTRY_AUTH_SASL_USERNAME   | The SASL username used for authenticating with the Schema registry.                                                                                                                                                                                                                                                                     |
| KAFKA_SCHEMAREGISTRY_AUTH_SASL_PASSWORD   | The password for the SASL user for authenticating with the Schema registry.                                                                                                                                                                                                                                                                 |
| **Amplify variables**        |                                                                                                                                                                                                                                                                                                                                                   |
| CENTRAL_APISERVICEREVISIONPATTERN    | Refer to [CENTRAL_APISERVICEREVISIONPATTERN](/docs/connect_manage_environ/connected_agent_common_reference/agent-variables#CENTRAL_APISERVICEREVISIONPATTERN).                                                                                                                                                                            |
| CENTRAL_APISERVERVERSION             | Version of the API Server that the agent will communicate with.                                                                                                                                                                                                                                                                           |
| CENTRAL_APPENDENVIRONMENTTOTITLE     | Set to false to skip adding the environment name to the title and description of the API.                                                                                                                                                                                                                                                 |
| CENTRAL_AUTH_CLIENTID                | The client identifier associated to the service account created in Amplify. Locate this at *Amplify > Organization > Service Accounts > client Id*.                                                                                                                                                                                         |
| CENTRAL_AUTH_KEYPASSWORD             | The path to the file with the password for the private key, if applicable.                                                                                                                                                                                                                                                                |
| CENTRAL_AUTH_PRIVATEKEY              | The private key associated with the service account.                                                                                                                                                                                                                                                                                      |
| CENTRAL_AUTH_PUBLICKEY               | The public key associated with the service account.                                                                                                                                                                                                                                                                                       |
| CENTRAL_AUTH_REALM                   | The Realm used to authenticate for Amplify: `Broker`.                                                                                                                                                                                                                                                                                     |
| CENTRAL_AUTH_TIMEOUT                 | The timeout to wait for the authentication server to respond (ns - default, us, ms, s, m, h). Set to 10s.                                                                                                                                                                                                                                 |
| CENTRAL_AUTH_URL                     | The Amplify login URL: `<https://login.axway.com/auth>`.                                                                                                                                                                                                                                                                                  |
| CENTRAL_CLIENTTIMEOUT                | The frequency at which the agent polls for event changes for the periodic agent status updater (ns - default, us, ms, s, m, h). Set to 5m.                                                                                                                                                                                                |
| CENTRAL_DEPLOYMENT                   | Specifies region (default: US = `prod` / EU = `prod-eu` / APAC = `prod-ap`).                                                                                                                                                                                                                                                              |
| CENTRAL_ENVIRONMENT                  | Name of the Amplify environment where the API will be hosted.                                                                                                                                                                                                                                                                                 |
| CENTRAL_JOBTIMEOUT                   | The longest duration interval or scheduled jobs are allowed to run before being canceled (default: `5m`).                                                                                                                                                                                                                                 |
| CENTRAL_ORGANIZATIONID               | The Organization ID from Amplify. Locate this at *Platform > User > Organization*.                                                                                                                                                                                                                                                          |
| CENTRAL_PROXYURL                     | The URL for the proxy for Amplify `<http://username:password@hostname:port>`. If empty, no proxy is defined.                                                                                                                                                                                                                              |
| CENTRAL_SSL_CIPHERSUITES             | An array of strings. It is a list of supported cipher suites for TLS versions up to TLS 1.2. If CipherSuites is nil, a default list of secure cipher suites is used, with a preference order based on hardware performance. See [Supported Cipher Suites](/docs/connect_manage_environ/connected_agent_common_reference/agent_security/). |
| CENTRAL_SSL_INSECURESKIPVERIFY       | Controls whether a client verifies the server's certificate chain and host name. If true, TLS accepts any certificate presented by the server and any host name in that certificate. In this mode, TLS is susceptible to man-in-the-middle attacks.                                                                                       |
| CENTRAL_SSL_MAXVERSION               | String value for the maximum SSL/TLS version that is acceptable. If empty, then the maximum version supported by this package is used, which is currently TLS 1.3. Allowed values are: TLS1.0, TLS1.1, TLS1.2, TLS1.3.                                                                                                                    |
| CENTRAL_SSL_MINVERSION               | String value for the minimum SSL/TLS version that is acceptable. If zero, empty TLS 1.0 is taken as the minimum. Allowed values are: TLS1.0, TLS1.1, TLS1.2, TLS1.3.                                                                                                                                                                      |
| CENTRAL_TEAM                         | The name of the team in Amplify that all APIs will be linked to. Locate this at *Amplify > Organization > Teams*.                                                                                                                                                                                                                           |
| CENTRAL_URL                          | The URL to the Amplify instance being used for agents (default value: US =  `<https://apicentral.axway.com>` / EU = `https://central.eu-fr.axway.com` / APAC = `https://central.ap-sg-fr.axway.com`).                                                                                                                                     |
| CENTRAL_VERSIONCHECKER               | Set to false to turn off the Agent job that checks if the running agent is the latest available (default: `true`).                                                                                                                                                                                                                        |
| **Status variables**                 |                                                                                                                                                                                                                                                                                                                                           |
| STATUS_HEALTHCHECKINTERVAL           | Time in seconds between running periodic health checker (binary agents only). Allowed values are from 30 seconds to 5 minutes. Specify value as s or m. (default value: 30s).                                                                                                                                                             |
| STATUS_HEALTHCHECKPERIOD             | Time in minutes allotted for services to be ready before exiting the agent. Allowed values are from 1 to 5 minutes.                                                                                                                                                                                                                       |
| STATUS_PORT                          | Port used for checking the health status of the running agent.                                                                                                                                                                                                                                                                            |
| **Logging variables**                |                                                                                                                                                                                                                                                                                                                                           |
| LOG_FILE_CLEANBACKUPS                | The max age of a backup file, in days.                                                                                                                                                                                                                                                                                                    |
| LOG_FILE_KEEPFILES                   | The max number of log file backups to keep.                                                                                                                                                                                                                                                                                               |
| LOG_FILE_NAME                        | The name of the log files.                                                                                                                                                                                                                                                                                                                |
| LOG_FILE_PATH                        | The path to save logs files if output type file or both. Traceability Agents require this to be an absolute path.                                                                                                                                                                                                                         |
| LOG_FILE_ROTATEEVERYMEGABYTES        | The max size, in megabytes, that a log file can grow to.                                                                                                                                                                                                                                                                                  |
| LOG_FORMAT                           | The format to print log messages (json, line, package).                                                                                                                                                                                                                                                                                   |
| LOG_LEVEL                            | The log level for output messages (debug, info, warn, error).                                                                                                                                                                                                                                                                             |
| LOG_MASKEDVALUES                     | Comma-separated list of keywords to identify within the agent config, which is used to mask its corresponding sensitive data. Keywords are matched by whole words and are case-sensitive.                                                                                                                                                 |
| LOG_OUTPUT                           | The output for the log lines (stdout, file, both). When set to `both` for the Traceability Agent, only the file output will appear.                                                                                                                                                                                                       |

{{< alert title="Note" color="primary" >}}For logging, it is recommended to set it up in the agent configuration file to keep the log separated for each agent.{{< /alert >}}

### Specific variables for Traceability Agent

| Variable name                                  | Description                                                                                                                                                                                                                                                                                                                     |
|------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CENTRAL_USAGEREPORTING_INTERVAL                | The frequency in which the agent reports API usage to Amplify (default value: `15m`).                                                                                                                                                                                                                                           |
| CENTRAL_USAGEREPORTING_USAGESCHEDULE           | The schedule at which usage events are sent to the platform (`@daily` - default value and minimum, `@hourly`, `@weekly`, `@monthly`).                                                                                                                                                                                           |
| CENTRAL_USAGEREPORTING_PUBLISH                 | Enables/disables the sending of usage events to Amplify (default value: `true`). Takes precedence over replaced variable CENTRAL_PUBLISHUSAGE.                                                                                                                                                                                  |
| QUEUE_MEM_FLUSH_MINEVENTS                      | The minimum number of events in queue required for publishing (default value: `100`).                                                                                                                                                                                                                                           |
| QUEUE_MEM_FLUSH_TIMEOUT                        | The maximum time to wait for min_events to be fulfilled (default value: `1s`).                                                                                                                                                                                                                                                  |
| TRACEABILITY_BULKMAXSIZE                       | The maximum number of events to bulk in a single ingestion request (default value: `100`).                                                                                                                                                                                                                                      |
| TRACEABILITY_CLIENTTIMEOUT                     | The time to wait for ingestion response (default value: `60s`).                                                                                                                                                                                                                                                                 |
| TRACEABILITY_COMPRESSIONLEVEL                  | The gzip compression level for the output event (default value: `3`).                                                                                                                                                                                                                                                           |
| TRACEABILITY_HOST                              | The host name and port of the ingestion service to forward the transaction log entries (default value: US = `<ingestion.datasearch.axway.com:5044>` / EU = `ingestion.visibility.eu-fr.axway.com:5044` / APAC = `ingestion.visibility.ap-sg.axway.com:5044`).                                                                   |
| TRACEABILITY_PROTOCOL                          | Protocol (https or tcp) to be used for communicating with the ingestion service (default value: `tcp`).                                                                                                                                                                                                                             |
| TRACEABILITY_PROXYURL                          | The socks5 or http URL of the proxy server for the ingestion service (`<socks5://hostname:port>`). If empty, no proxy is defined.                                                                                                                                                                                                   |
| TRACEABILITY_WORKER                            | The number of workers collecting events and sending them to Amplify (default value: `1`).                                                                                                                                                                                                                                       |
