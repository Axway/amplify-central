---
title: Manage product plans
linkTitle: Manage product plans
weight: 35
---

Monetize the product and define the usage terms by using product plans.

## Objectives

Learn how to create and configure the product plan using the Product Foundry WebUI.

## Concepts

**Plan** - contains the details about how to charge consumers, how often and how much.

**Quotas** - describe the itemized units per resource or group of resources in the product, and how much of those units they are entitled to use over a billing period.

**Consumption Units** - defines the billable units. For example: Transactions, Seats, Messages. Used with the quotas to describe the pricing and how many units a consumer is entitled to use.

## Product plan states

| State      | Description                                                                                                                                                                |
|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Draft      | The plan is not listed in the Marketplace. Changes can be made to the plan.                                                                                                |
| Active     | The plan is listed in the Marketplace. Allows new subscriptions.                                                                                                           |
| Deprecated | New subscriptions on this plan are not allowed. Consumers with an existing subscription can continue to stay on this plan until their subscription expires.                |
| Archived   | After a plan is deprecated with an auto-expiration date, the plan will automatically move to Archived when the last subscription moves to expired.                         |

## Product plan types and quota consumption costs

There are two types of consumer product plans:

* **Free plan** - no charge for API consumption.
* **Paid plan**:
    * **Standard** - charged a recurrent base price for a set amount of units. Quota limit applies.
    * **Pay per use** - charged a fixed price for each unit. There is no consumption limit.
    * **Tier - Graduated** - charged for each unit based on the price of its corresponding tier + flat tier fee, if any.
    * **Tier - Volume** - charged for all units based on the price of the final tier reached + flat tier fee, if any.

Examples of paid plans (illustrative only):

* Standard paid plan cost: Base price: $100, Quota limit: unlimited.

| *Consumed transactions* | *Based price*       | *Total price*         |
|-------------------------|---------------------|-----------------------|
| 1,000                   | $100                | $100   |
| 10,000                  | $100                | $100   |

* Pay per use: Based price: $0, Price per unit: $0.01 / transaction

| *Consumed transactions* | *Transaction price* | *Total price*       |
|-------------------------|---------------------|-----------------------|
| 1,000                   | 0.01                | 1,000 \* 0.01 = $10   |
| 10,000                  | 0.01                | 10,000 \* 0.01 = $100 |

* Tier - Graduated: Based price: $0; Total cost for **5001** transactions would be: **$5530.50**

| *Limit from* | *Limit to*     | *Unit price* | *Tier Flat fee*   | *Amount*                |
|--------------|----------------|--------------|-------------------|-------------------------|
| 1            | 500            | $2           | $0                | 500 x $2 = $1,000       |
| 501          | 5000           | $1           | $10               | 4500 x $1 + $10 = $4510 |
| 5001         | unlimited      | $0.5         | $20               | 1 x $0.5 + $20 = $20.50 |

* Tier - Volume: Based price: $0; Total cost for **5001** transactions would be: **$2520.50**

| *Limit from* | *Limit to*     | *Unit price* | *Tier Flat fee*   | *Amount*                     |
|--------------|----------------|--------------|-------------------|------------------------------|
| 1            | 500            | $2           | $0                | 0 x $2 = $0                  |
| 501          | 5000           | $1           | $10               | 0 x $1 + $10 = $0            |
| 5001         | unlimited      | $0.5         | $20               | 5001 x $0.5 + $20 = $2520.50 |

## Create a product plan

You can create new product plans at any time, regardless of the product lifecycle state or whether the product is published in a Marketplace.

When you create a new product, you have the option to configure a **Free** or **paid** product plan. If you skip this step, a free plan will be auto generated by default, which you can edit / modify later.

To configure a product plan from the *product details* page:

1. Navigate to the Plans section.
2. Click **+ Add Plan** to open the plan creation wizard.
3. Follow the plan wizard and enter the required information:
   * Plan profile - title (mandatory), name (optional), description (optional)
   * [Billing configuration](/docs/manage_product_foundry/manage_product_plans#billing-information)
   * [Plan quotas](/docs/manage_product_foundry/manage_product_plans#configure-a-quota)
   * [Add custom metadata](/docs/manage_product_foundry/manage_product_plans#configure-access)
   * Add optional tags and attributes

### Billing information

The billing information describes whether the plan has a financial aspect. It can be a Free plan or a Paid plan. The Free plan has no cost; whereas, the Paid plan has two costs: a setup cost occurring at the creation of the subscription, and a recurring cost at each billing cycle. The plan fields are optional: you can use one or the other, or both. The Paid plan requires a currency so that the billing system will know how to bill the consumer.

You can also determine whether the subscription will be never ending, or if it will be automatically cancelled after a certain period of time (for instance, a trial period before moving to a different plan). This is available for both Free and Paid plans.

Lastly, for a Paid plan, an automatic subscription cancellation can be set up for when the subscription has past-due invoices. For example, if an invoice has not been paid in a timely manner, this will automatically cancel the subscription and terminate all associated access and credentials.

To configure plan billing, enter the values for the following properties:

* **Plan Type** - Free or Paid.
* **Currency** (Paid plan only) - choose the currency that will be used to charge the subscription.
* **Setup Fee** (Paid plan only) - the initial fee when subscription is created. These fees appear on the first invoice the consumer pays before being able to request access to any resource.
* **Basic Price** (Paid plan only) - the recurring price that is added to the billing period invoices.
* **Billing Period** - choose between Monthly or Annually. This determines how often the consumer receives an invoice if the billing system integration is setup.
* **Subscription Term Length** - the length of the subscription for a limited period of time or **Unlimited** (default). Uncheck Auto-renew to select the period of time after which the subscription will be automatically cancelled once the term is reached.
* **Cancel Subscription with Past Due Invoice** (Paid plan only) - select if you want to activate this option with billing integration to ensure that the consumer cannot abuse the subscription when invoices are unpaid.

{{< alert title="Caution" color="danger" >}}
**Impact on cancelling subscription**
When a subscription is cancelled, the system initiates events to deprovision corresponding Access and Credentials to prevent the consumer from abusing the subscription. These events will be processed automatically if a Discovery Agent is managing the underlying gateway or manually when no agent is connected.
{{< /alert >}}

### Configure a quota

A quota describes the itemized units per resource, or group of resources, in a product, and how much of those units the consumer is entitled to use over a period of time.

For a Paid plan, each quota can be associated with a cost depending on the quota type (Standard / Tier / Pay Per Use). See [Product plan type and quota consumption cost](#product-plan-types-and-quota-consumption-costs).

By default, the billing period of the plan is used as the quota enforcement period. However, you can override this behavior so that quota enforcement and billing period are not linked together. For instance, you can set a monthly billing period and have weekly or daily quota enforcement, meaning that the invoice is generated each month and each day/week when there is a certain amount of API calls allowed.

{{< alert title="Note" color="primary" >}}
When you choose to de-correlate the billing period and the quota enforcement period, certain rules for the pricing model of paid plans are applied:

* **Standard pricing model**: unless the number of call is unlimited, the loose limit will be applied so that you can collect money in case the quota limit is exceeded.
* **Tiered pricing model**: unless the last tier has the unlimited value, an additional tier with the maximum upper limit is added so that you can collect money in case the quota limit is exceeded.
{{< /alert >}}

To configure a quota for a **Free plan**, enter the values for the following properties:

* Quota profile:
    * **Quota Name** - a name for the quota.
    * **Consumption Unit** - the default is **Transactions**. You can select a different consumption unit if any is available in the system. Refer to [create a consumption unit](/docs/manage_product_foundry/manage_consumption_units#create-a-consumption-unit)
* Quota usage limit:
    * **Toggle** - activate a separate quota enforcement than the plan billing period.
    * **Interval** - the quota's period enforcement on the gateway: choose between Daily, Weekly, Monthly or Annually.
    * **Limit** - the maximum API calls allowed for the selected period.
* Quota pricing model:
    * **Pricing Model** (only **Standard** is available).
    * **Limit** - enter a quantity (for example, 1000, 15) or check Unlimited to not specify any limitation.
    * **Quota Type** - select either **Daily**, **Weekly** or **Monthly**.
    * **Limit Type** (only **Strict** is available) - the gateway enforces a hard stop when the quota limit is exceeded.
* Quota resources:
    * **Assign Resources** - the list of resources the provider will charge for by a measured unit. Only the resources included in the plan can be selected.

{{< alert title="Note" color="primary" >}}When Limit Type is set to Strict, make sure the quota is enforced on the underlying gateway.{{< /alert >}}
{{< alert title="Note" color="primary" >}}When selecting **Unlimited**, Limit, Quota Type and Limit Type are disabled. Be sure the underlying gateway can support the load.{{< /alert >}}

To configure a quota for a **Paid plan**, enter the values for the following properties:

* Quota profile:
    * **Quota Name** - a name for the quota.
    * **Consumption Unit** - the default is **Transactions**. You can select a different consumption unit if any is available in the system. Refer to [create a consumption unit](/docs/manage_product_foundry/manage_consumption_units#create-a-consumption-unit)
* Quota usage limit:
    * **Toggle** - activate a separate quota enforcement than the plan billing period.
    * **Interval** - the quota's period enforcement on the gateway: choose between Daily, Weekly, Monthly, or Annually.
    * **Limit** - the maximum API calls allowed for the selected period.
* Quota pricing model:
    * **Pricing model** - select either **Standard**, **Tiered - Volume**, **Tiered - Graduated**, or **Pay Per Use**:
        * Standard - has the same information as the free plan (**Unit**, **Limit**, **Quota Type**, **Limit Type**, **Overage** for loose limit type).
        * Tiered - for each tier, enter the **lower limit**, the **upper limit**, the **unit price**, and the **standard** fees. There is no limit in the tier number. Click **+** to add another tier, or **-** to remove a tier definition. The lower limit of the next tier is automatically computed based on the upper limit of the previous tier. The unlimited value is represented with the number 999999999 and automatically added to the last tier **upper limit**.
        * Pay Per Use - select the transaction unit cost.

Click **+ Add Quota** to create another quota group for a different resource. Once a resource is assigned to a quota group, it is no longer available for another quota group.

When you are finished configuring the quotas, click **Next** to select the approval mode of the plan.

### Configure access

At the time of the subscription, it is optional to request additional information from your consumer by selecting one of the predefined [subscription screen definitions](/docs/integrate_with_central/customize_ard_crd#customize-subscription-screen) from the dropdown.

To configure the type of approval when a subscriber submits a request to purchase the plan, choose between:

* **Manual** - a provider will have to manually approve the subscription before the consumer can use it.
* **Automatic** - the subscription is automatically approved and immediately usable.

When you are finished creating the plan, click **Save Draft and Exit** to save the product plan in DRAFT state.

## Edit product plans

A plan that is in a Draft state can be edited.

A plan that is in an Active state can also be edited, but is limited to adding a new resource to an existing quota or adding a new quota with resources that are not already part of an existing quota.

1. Navigate to the *Product Foundry* and select a product.
2. Click on the **Plans** tab. All plans configured for this product are displayed.
3. Click on the ellipsis on the plan table and select **Edit Plan**. The plan wizard opens with the plan information. You can modify any value except the plan name.

## View product plans

1. Navigate to the *Product Foundry* and select a product.
2. Click on the **Plans** tab. All plans configured for this product are displayed.
3. Click on the plan title. The configuration of the plan is displayed in the side panel.

## Publish a product plan in the Marketplace

1. Navigate to the *Product Foundry* and select a product.
2. Click on the **Plans** tab. All plans configured for this product are displayed.
3. Click on the plan title. The configuration of the plan is displayed in the side panel.
4. Click **Activate** to publish.

You can also use the ellipsis menu on the plan list and select **Activate**. Only plans in DRAFT state can be activated.

{{< alert title="Note" color="primary" >}}A plan can only be listed in the Marketplace when the product the plan is associated to is ACTIVE and PUBLISHED in the Marketplace.{{< /alert >}}

## Duplicate a product plan

Instead of creating a plan from scratch, you can save time by duplicating any existing plan (active or not) into a new plan.

* The duplicated plan will be named the same as the original plan + Copy (x).
* The duplicated plan will be created in Draft state so that it can be updated (changes can include the name, plan type Free/Paid, quotas, pricing).

{{< alert title="Note" color="primary" >}}
All corrupted resources from the original plan will not be copy into the duplicated plan.
If this operation leaves orphan quotas, the quotas will not be added to the duplicated plan.
{{< /alert >}}

{{< alert title="Note" color="primary" >}}
When the original plan contains only one resource in error, the duplicate action is not available as it will leave the plan without a resource.
{{< /alert >}}

To duplicate a plan:

1. Navigate to the *Product Foundry* and select a product.
2. Click the **Plans** tab. All plans configured for this product are displayed.
3. Click the ellipsis menu of the plan you want to duplicate and select **Duplicate**. A warning message may display: *Corrupted resources will be removed from the new plan. If a quota becomes empty due to the removal, the quota will not be added to the new plan*. Click **Duplicate** to continue.
4. The name of the new plan is displayed when the duplication process is complete. Click **Edit** to update the new plan. See [Edit product plan](#edit-product-plans).

## Deprecate a product plan

A provider can deprecate an active plan when the terms of the plan change, or it is no longer relevant, and they would like to prevent new subscriptions under the plan. When deprecating a plan, the provider can choose one of the following:

* Deprecate the plan only - this plan will no longer be available for new subscriptions, but existing ones will continue to work.
* Cancel the corresponding subscription - the corresponding subscription will be cancelled and cannot be used anymore to request resource access; the subscription is still present in the Marketplace so that the associated metrics can be displayed.
* Migrate subscription to a new plan - the subscriptions under this plan will be moved to a new plan. Refer to [Migrate subscriptions to a new plan](/docs/manage_product_foundry/manage_product_plans#migrate-subscriptions-to-a-new-plan).

To deprecate a plan:

1. Navigate to the *Product Foundry* and select a product.
2. Click the **Plans** tab. All plans configured for this product are displayed.
3. Click the ellipsis menu of the plan you want to deprecate and select **Deprecate**. *The Usage Plan State panel is displayed*.
4. Select an action: None, Move to a new plan, or Cancel.
5. Click **Update** to deprecate the plan, or **Cancel** to cancel the plan deprecation.

The plan state will change to *Deprecated* with today's date.

Once the plan is deprecated, Marketplace consumers cannot subscribe to it. Only subscribers with an active subscription under the plan can see it.

## Migrate subscriptions to a new plan

Providers can move consumers onto a new plan when the terms change (a change in the quota, price, resources) by migrating existing subscriptions to another plan. When subscriptions are migrated, the issued credentials under the previous subscriptions remain valid, allowing consumers to continue to use the resources offered under the previous plan. There might be a period of time that the API service access is disrupted, as everything is event based and the Discovery Agent needs to process the new plan information to apply the corresponding changes to the underlying data plane.

To migrate subscriptions to a new plan:

1. Navigate to the *Product Foundry* and select a product.
2. Click the **Plans** tab. All plans configured for this product are displayed.
3. Click the ellipsis menu of the plan you want to migrate and select **Migrate**. *The Migration Subscriptions panel is displayed*.
4. Select the new destination plan you want your subscriptions to be migrated to. If the new plan does not have the same resource as the original plan, a warning message is displayed showing the resources for each plan (original / target).
5. Click **Continue** to approve the plan selection or select another plan.
6. Select when the migration should happen: **Immediately** or at a **Future date**.
7. Click **Migrate Subscriptions**.

{{< alert title="Note" color="primary" >}}
The **Migrate** action is available only for plans with subscriptions.
{{< /alert >}}

Once you validate your choice, the original plan is deprecated and a new subscription is added to the target plan. *The new subscription inherits the approval status of the original subscription*. If there were application registrations / credentials under the original subscription, they are marked as deleted and a new application registration is created. The Discovery Agent will deprovision the original subscription and provision the new one. Be sure your agent is running to minimize the service disruption.

The original subscription status will become "**Migration scheduled**" in case the migration is planned at a future date or "**Cancelled**" in case the migration is planned immediately.

## Archive a product plan

A provider can archive a deprecated plan. This action is only available for deprecated plans with no subscriptions attached.

1. Navigate to the *Product Foundry* and select a product.
2. Click on the **Plans** tab. All plans configured for this product are displayed.
3. Click the ellipsis menu of the plan you want to archive and select **Archive**.

The plan state will change to *Archived*.
